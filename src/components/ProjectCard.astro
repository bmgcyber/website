---
import { Image } from "astro:assets";
import SkillBadge from "./SkillBadge.astro";
import { ExternalLink } from "@lucide/astro";
import type { CollectionEntry } from "astro:content";

interface Props {
  project: CollectionEntry<"projects">;
}

const { project } = Astro.props;

function formatPeriod(startDate: Date, endDate?: Date) {
  const options: Intl.DateTimeFormatOptions = {
    month: "short",
    year: "numeric",
  };
  const start = startDate.toLocaleDateString("en-US", options);
  const end = endDate
    ? endDate.toLocaleDateString("en-US", options)
    : "Present";
  return `${start} - ${end}`;
}
---

<article class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow">
  <figure class="aspect-video">
    <Image
      src={project.data.image}
      alt={project.data.title}
      class="w-full h-full object-cover"
      width={600}
      height={400}
    />
  </figure>
  <div class="card-body">
    <h3 class="card-title">{project.data.title}</h3>
    <p class="text-sm text-base-content/60">
      {project.data.tagline ||
        formatPeriod(project.data.startDate, project.data.endDate)}
    </p>
    <p class="text-base-content/80">{project.data.description}</p>
    <div class="flex flex-wrap gap-2 mt-2">
      {project.data.skills.map((skill) => <SkillBadge skill={skill} />)}
    </div>
    <div class="card-actions justify-end mt-4 gap-2">
      {
        project.data.demoLink && (
          <a
            href={project.data.demoLink}
            target="_blank"
            rel="noopener noreferrer"
            class="btn btn-sm btn-soft gap-1"
          >
            <ExternalLink class="size-4" />
            Demo
          </a>
        )
      }
      {/* GitHub/source button removed per request */}
    </div>
  </div>
</article>
